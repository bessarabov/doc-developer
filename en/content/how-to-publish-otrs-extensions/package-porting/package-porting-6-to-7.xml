<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN" "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd">

<section id="package-porting-6-to-7">
    <title>From OTRS 6 to 7</title>
    <para>
        This section lists changes that you need to examine when porting your package from OTRS 6 to 7.
    </para>

    <section id="no-sessions-without-cookies">
        <title>Sessions always require cookies</title>
        <para>
            Starting from OTRS 7, <ulink url="https://github.com/OTRS/otrs/commit/831aba1cfe6893d0633af6f18584216e89198072">
            sessions always require cookies to be enabled</ulink>. Therefore, the
            <literal>SessionIDCookie</literal> value was removed from <literal>LayoutObject</literal>,
            Templates and JavaScript. It is no longer necessary to append session variables to URLs or
            HTTP request payloads.
        </para>
    </section>

    <section id="groups-table-renamed">
        <title>The <literal>groups</literal> table was renamed</title>
        <para>
            Due to a change in MySQL 8, the table <literal>groups</literal> had to be renamed to
            <literal>groups_table</literal>. If you use this table directly in any SQL statements, they will
            need to be adapted. For more information, see
            <ulink url="https://bugs.otrs.org/show_bug.cgi?id=13866">bug#13866</ulink>.
        </para>
    </section>

    <section id="new-external-interface">
        <title>New external interface</title>
        <para>
            The existing customer (<literal>customer.pl</literal>) and public (<literal>public.pl</literal>) interfaces
            were replaced by a new REST backend (<literal>Kernel/WebApp</literal>) and a modern <literal>Vue.js</literal>
            based frontend application. This means that all related code has to be ported and/or rewritten.
        </para>
        <para>
            There is one special case for "public" frontend modules that don't serve an HTML application. These can be
            ported rather easily to the new REST backend (see also <ulink url="http://doc.otrs.com/doc/api/otrs/7.0/REST/">the REST API docs</ulink>).
            See for example <literal>Kernel/WebApp/Controller/API/Public/Package/Repository.pm</literal>.
            This example also shows how endpoints can support both new REST-like URLs but at the same time the legacy
            URLs based on the <literal>/otrs/customer.pl?Action=MyAction</literal> routes at the same time.
        </para>
        <para>
            For some important URLs in the customer interface that are linked from legacy systems, redirect controllers
            may need to be provided to make sure the old URLs keep working.
        </para>
    </section>
</section>
